<mat-stepper orientation="horizontal" class="stacker-container" #matStepperView>
  <mat-step>
    <ng-template matStepLabel>Type of setup</ng-template>
    <ng-template matStepContent>
      <div class="container full-hw">
        <div class="row header">Select the setup that best suits your development level</div>
        <div class="row content">
          <mat-radio-group
            aria-labelledby="example-radio-group-label"
            class="example-radio-group"
            [(ngModel)]="troopConfig.selectedSetupType" (change)="radioChange($event)">
            @for (setupType of setupTypes; track setupType) {
              <mat-radio-button [value]="setupType.value">
                <div class="step1-card-container">
                <h3>{{ setupType.title }}</h3>
                <mat-icon [matTooltip]="setupType.description">help</mat-icon>
                </div>
              </mat-radio-button>
            }
          </mat-radio-group>
        </div>
        <div class="row footer">
          <button mat-button matStepperNext>Next
            <mat-icon iconPositionEnd>arrow_forward_ios</mat-icon>
          </button>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <mat-step class="full-hw">
    <ng-template matStepLabel>Bonuses setup</ng-template>
    <ng-template matStepContent>
      <div class="container full-hw">
        <div class="row header">You can find said bonuses in an attack report when you click the individual troops in
          the
          report
        </div>
        <div class="row content">
          <div class="example-loading-shade" *ngIf="!monacoLoaded()">
            <mat-spinner [diameter]="40"></mat-spinner>
          </div>
          <ngx-monaco-editor [options]="editorOptions" (onInit)="monacoLoaded.set(true)"
                             [(ngModel)]="troopConfig.bonusConfigs[troopConfig.selectedSetupType].config"
                             class="editor">

          </ngx-monaco-editor>
        </div>
        <div class="row footer">
          <button mat-button matStepperPrevious>
            <mat-icon>arrow_back_ios_new</mat-icon>
            Back
          </button>
          <button mat-button (click)="saveConfig()">Next
            <mat-icon iconPositionEnd>arrow_forward_ios</mat-icon>
          </button>
          <mat-error>{{ errors$|async }}</mat-error>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Leadership size</ng-template>
    <ng-template matStepContent>
      <div class="container full-hw">
        <div class="row header">Enter leadership and troop types</div>
        <div class="row content in-column">
          <mat-form-field appearance="outline">
            <mat-label>Leadership</mat-label>
            <input matInput type="number" name="leadership"
                   [(ngModel)]="troopConfig.leadership">
          </mat-form-field>
          <mat-form-field appearance="outline">
            <mat-label>Guardsmen level</mat-label>
            <mat-select [(value)]="troopConfig.selectedLevels" multiple>

              <span>Guardsmen</span>
              <mat-divider [inset]="true"></mat-divider>
              <mat-option *ngFor="let level of troopLevelGuardsmen" [value]="level">{{ level }}</mat-option>
              <span>Specialists</span>
              <mat-divider [inset]="true"></mat-divider>
              <mat-option *ngFor="let level of troopLevelSpecialists" [value]="level">{{ level }}</mat-option>
              <mat-divider fxFlex="1 0"></mat-divider>
            </mat-select>
          </mat-form-field>
        </div>
        <div class="row footer">
          <button mat-button matStepperPrevious>
            <mat-icon>arrow_back_ios_new</mat-icon>
            Back
          </button>
          <button mat-button matStepperNext (click)="calculateStacks()">
            Calculate stacks
            <mat-icon iconPositionEnd>arrow_forward_ios</mat-icon>
          </button>
        </div>
      </div>
    </ng-template>
  </mat-step>
  <mat-step>
    <ng-template matStepLabel>Recommended stack</ng-template>
    <ng-template matStepContent>
      <div class="container full-hw">
        <div class="row header">Optimal stacking</div>
        <div class="row content in-column">
          <mat-list class="troop-list-container">
            <mat-list-item *ngFor="let squad of troopList">
          <span matListItemTitle class="troop-info">
            <img [src]="squad.image" [alt]="squad.name" class="troop-image">
            <div class="troop-count">{{ squad.count }}</div>
          </span>
              <span matListItemMeta>{{ squad.name }}</span>
            </mat-list-item>
          </mat-list>
        </div>
        <div class="row footer">
          <button mat-button matStepperPrevious>
            <mat-icon>arrow_back_ios_new</mat-icon>
            Back
          </button>
        </div>
      </div>
    </ng-template>
  </mat-step>
</mat-stepper>
